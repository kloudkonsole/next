{
	"mod": [{
		"id": "web",
		"mod": "./mod/web",
		"host": "127.0.0.1",
		"port": 1337
	},{
		"id": "db",
		"mod": "./mod/json_mem",
		"meta": {
			"type": "object",
			"spec": {
				"i": "number",
				"s": "number",
				"cat": "number",
				"uat": "date",
				"cby": "number",
				"uby": "date"
			}
		}
	},{
		"id": "timer",
		"mod": "./mod/timer"
	},{
		"id": "util",
		"mod": "./mod/util"
	},{
		"id": "jsonmem",
		"mod": "./mod/json_mem"
	}],
	"rsc": {
		"users": {
			"meta": {
			},
			"schema": {
				"type": "object",
				"spec": {
					"name": {
						"type": "array",
						"gt": 0,
						"spec": "string"
					},
					"ccode": "number",
					"mobile": "number",
					"email": "string",
					"address": {
						"type": "array",
						"gt": 0,
						"spec": "string"
					}
				}
			}
		}
	},
	"spec": {
		"grouping": [["index", "csv"], ["range", "start", "end"]],
		"params": {
			"type": "object",
			"spec": {
				"rsc": {
					"type": "string",
					"required": 1
				},
				"id": "string"
			}
		},
		"query": {
			"type": "object",
			"spec": {
				"page": "number",
				"size": "number",
				"sort": "string",
				"q": "string",
				"filter": {
					"type": "array",
					"sep": "~",
					"spec": {
						"type": "object",
						"spec": {
							"include": {
								"type": "array"
							},
							"range": "string",
							"start": {
								"type": "null",
								"required": ["bool", ["range"]]
							},
							"end": {
								"type": "null",
								"required": ["bool", ["range"]]
							},
							"index": "string",
							"csv": {
								"type": "array",
								"sep": "~",
								"required": ["bool", ["index"]]
							}
						}
					}
				}
			}
		}
	},
	"routes": {
		"* * * * * *": [
			["util.log", "hello"]
		],
		"POST/rsc": [
			["web.bodyParser", "_.req", "_.input"],
			["util.input2", "_.input", "_.rc.schema", "_.valid"],
			["jsonmem.set", "_.params.rcs", null, "_.valid", "_.res"],
			["jsonmem.get", "_.params.rcs", "_.res.id", "_.output"],
			["util.push", "_.output", "_.:output"]
		],
		"GET/rsc": [
			["util.input2", "_.url.query", "@.spec.query","_.meta"],
			["jsonmem.find", "_.params.rcs", "_.meta", "_.:output"]
		],
		"PUT/rsc/id": [
			["web.bodyParser", "_.req", "_.input"],
			["jsonmem.get", "_.params.rcs", "_.params.id", "_.origin"],
			["util.extend", "_.origin.doc", "_.input", "_.updated"],
			["util.input2", "_.updated", "_.rc.schema", "_.valid"],
			["jsonmem.set", "_.params.rcs", "_.params.id", "_.valid", "_.res"],
			["jsonmem.get", "_.params.rcs", "_.res.id", "_.output"]
		],
		"GET/rsc/id": [
			["jsonmem.get", "_.params.rcs", "_.params.id", "_.output"]
		],
		"DELETE/rsc/id": [
			["jsonmem.hide", "_.params.rcs", "_.params.id"],
			["jsonmem.get", "_.params.rcs", "_.params.id", "_.output"]
		],
		"/1.0/health": [
			[["web.output", "text/plain", "text"], "_.res", "hello"],
			["util.wait", 5]
		],
		"/1.0/:rsc": [
			[["web.output"], "_.res", "_.:output", "_.meta"],
			["util.input2", "$.params", "@.spec.params", "_.params"],
			[["web.router", "@.rsc"], "_.req.method", "_.params"]
		],
		"/1.0/:rsc/:id": [
			[["web.output"], "_.res", "_.output", "_.meta"],
			["util.input2", "$.params", "@.spec.params", "_.params"],
			[["web.router", "@.rsc"], "_.req.method", "_.params"]
		]
	}
} 
